<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Aluno - Sistema Escolar</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Menu de Acessibilidade -->
    <div class="accessibility-menu">
        <button class="accessibility-toggle">
            ♿ Acessibilidade
        </button>
        <div class="accessibility-options" id="accessibilityOptions">
            <a href="#" onclick="toggleAccessibility('daltonismo')">Modo Daltônico</a>
            <a href="#" onclick="toggleAccessibility('preto-e-branco')">Preto e Branco</a>
            <a href="#" onclick="toggleAccessibility('nenhum')">Restaurar Padrão</a>
        </div>
    </div>

    <!-- Legendas de Acessibilidade -->
    <button class="legend-toggle" onclick="toggleLegend()">Ver Legenda (Daltonismo)</button>
    <div class="daltonismo-legend" id="daltonismoLegend">
        <button class="legend-close-btn" onclick="toggleLegend()" aria-label="Fechar legenda">×</button>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #0066cc;">★</div>
            <span class="legend-text">Excelente</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #666666;">●</div>
            <span class="legend-text">Bom</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #cc6600;">▲</div>
            <span class="legend-text">Regular / Atenção</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #000000;">✖</div>
            <span class="legend-text">Insatisfatório</span>
        </div>
    </div>

    <button class="pb-legend-toggle" onclick="togglePbLegend()">Ver Legenda (P&B)</button>
    <div class="pb-legend" id="pbLegend">
        <button class="legend-close-btn" onclick="togglePbLegend()" aria-label="Fechar legenda">×</button>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #666;">■</div>
            <span class="legend-text">Excelente</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #666;">●</div>
            <span class="legend-text">Bom</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #666;">▲</div>
            <span class="legend-text">Regular / Atenção</span>
        </div>
        <div class="legend-item">
            <div class="legend-symbol" style="background: #666;">✖</div>
            <span class="legend-text">Insatisfatório</span>
        </div>
    </div>

    <!-- Elementos Decorativos -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
    </div>

    <div class="app-container">
        <!-- DASHBOARD ALUNO -->
        <div class="page active" id="dashboardAlunoPage">
            <div class="main-layout">
                <nav class="sidebar">
                    <div class="menu-item active" onclick="showAlunoSection('notas')">
                        <div class="menu-icon">📊</div>
                        <span>Meu Boletim</span>
                    </div>

                    <div class="menu-item" onclick="showAlunoSection('conquistas')">
                        <div class="menu-icon">🏆</div>
                        <span>Conquistas</span>
                    </div>

                    <div class="menu-item" onclick="showAlunoSection('calendario')">
                        <div class="menu-icon">📅</div>
                        <span>Calendário</span>
                    </div>

                    <div class="menu-item" onclick="showAlunoSection('perfil')">
                        <div class="menu-icon">👤</div>
                        <span>Meu Perfil</span>
                    </div>

                    <div class="menu-item" onclick="logout()">
                        <div class="menu-icon">🚪</div>
                        <span>Sair</span>
                    </div>
                </nav>

                <main class="main-content">
                    <div id="alunoNotasSection">
                        <div class="boletim-container">
                            <div class="bd-header">
                                <div class="bd-perfil">
                                    <div class="avatar-container">
                                        <img src="https://via.placeholder.com/80x80" alt="Foto do aluno" class="bd-avatar-oval" width="80" height="80">
                                        <div class="avatar-badge">🎓</div>
                                    </div>
                                    <div class="bd-perfil-info">
                                        <strong class="bd-perfil-nome" id="alunoPerfilNome">João da Silva</strong>
                                        <div class="bd-perfil-meta" id="alunoPerfilInfo">Matrícula: 2025001 • Turma: 3ºA</div>
                                        <div class="performance-indicator">
                                            <span class="performance-text">📈 Desempenho:</span>
                                            <span class="performance-value">Bom</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="header-badges">
                                    <div class="bd-projk">ProJK</div>
                                    <div class="student-level">⭐ Estudante Ativo</div>
                                </div>
                            </div>

                            <div class="bd-toolbar" role="region" aria-label="Opções de acessibilidade">
                                <button type="button" class="bd-btn" data-action="font-dec" aria-label="Diminuir texto">A−</button>
                                <button type="button" class="bd-btn" data-action="font-inc" aria-label="Aumentar texto">A+</button>
                                <button type="button" class="bd-btn" data-action="contrast" aria-label="Alto contraste">◐</button>
                                <button type="button" class="bd-btn" data-action="dyslexia" aria-label="Fonte para dislexia">𝑓</button>
                                <button type="button" class="bd-btn" data-action="reduce-motion" aria-label="Reduzir animações">◎</button>
                                <button type="button" class="bd-btn" data-action="print" aria-label="Exportar PDF">🖨</button>
                            </div>
                            
                            <h3 class="boletim-title">📋 Boletim</h3>
                            
                            <!-- Navegação entre Simulados -->
                            <div class="simulado-navigation">
                                <div class="nav-header">
                                    <h4>📚 Navegar por Simulados</h4>
                                    <p>Escolha um simulado para visualizar suas notas</p>
                                </div>
                                <div class="nav-buttons">
                                    <button class="nav-btn active" onclick="navegarSimulado(1)" data-simulado="1">
                                        <span class="nav-icon">📝</span>
                                        <span class="nav-label">Simulado 1</span>
                                    </button>
                                    <button class="nav-btn" onclick="navegarSimulado(2)" data-simulado="2">
                                        <span class="nav-icon">📝</span>
                                        <span class="nav-label">Simulado 2</span>
                                    </button>
                                    <button class="nav-btn" onclick="navegarSimulado(3)" data-simulado="3">
                                        <span class="nav-icon">📝</span>
                                        <span class="nav-label">Simulado 3</span>
                                    </button>
                                    <button class="nav-btn" onclick="navegarSimulado(4)" data-simulado="4">
                                        <span class="nav-icon">📝</span>
                                        <span class="nav-label">Simulado 4</span>
                                    </button>
                                </div>
                            </div>

                            <div class="tab-headers">
                                <div class="tab-header"><strong>📚 Disciplina</strong></div>
                                <div class="tab-header active" data-col="1">📝 Simulado 1</div>
                                <div class="tab-header" data-col="2">📝 Simulado 2</div>
                                <div class="tab-header" data-col="3">📝 Simulado 3</div>
                                <div class="tab-header" data-col="4">📝 Simulado 4</div>
                            </div>

                            <table class="grades-table">
                                <tr>
                                    <td class="subject-cell">Português</td>
                                    <td class="grade-cell grade-bom destaque-col-1">Bom</td>
                                    <td class="grade-cell grade-insatisfatorio">Insatisfatório</td>
                                    <td class="grade-cell grade-regular">Regular</td>
                                    <td class="grade-cell grade-excelente">Excelente</td>
                                </tr>
                                <tr>
                                    <td class="subject-cell">Matemática</td>
                                    <td class="grade-cell grade-bom destaque-col-1">Bom</td>
                                    <td class="grade-cell grade-regular">Regular</td>
                                    <td class="grade-cell grade-excelente">Excelente</td>
                                    <td class="grade-cell grade-bom">Bom</td>
                                </tr>
                                <tr>
                                    <td class="subject-cell">Ciências</td>
                                    <td class="grade-cell grade-excelente destaque-col-1">Excelente</td>
                                    <td class="grade-cell grade-bom">Bom</td>
                                    <td class="grade-cell grade-insatisfatorio">Insatisfatório</td>
                                    <td class="grade-cell grade-regular">Regular</td>
                                </tr>
                            </table>

                            <div class="status-section">
                                <h2 class="status-title">📊 Status</h2>
                                <div class="status-indicators">
                                    <div class="status-indicator status-muito-bem">🌟 Está muito bem</div>
                                    <div class="status-indicator status-bem">✅ Está bem</div>
                                    <div class="status-indicator status-atencao">⚠️ Requer atenção</div>
                                    <div class="status-indicator status-mal">❌ Está mal</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SEÇÃO CONQUISTAS -->
                    <div id="alunoConquistasSection" style="display: none;">
                        <div class="boletim-container">
                            <div class="bd-header">
                                <div class="bd-perfil">
                                    <div class="avatar-container">
                                        <img src="https://via.placeholder.com/80x80" alt="Foto do aluno" class="bd-avatar-oval" width="80" height="80">
                                        <div class="avatar-badge">🏆</div>
                                    </div>
                                    <div class="bd-perfil-info">
                                        <strong class="bd-perfil-nome" id="alunoConquistasNome">João da Silva</strong>
                                        <div class="bd-perfil-meta">Minhas Conquistas e Conquistas</div>
                                    </div>
                                </div>
                                <div class="header-badges">
                                    <div class="bd-projk">ProJK</div>
                                </div>
                            </div>

                            <div class="conquistas-grid">
                                <div class="conquista-card earned">
                                    <div class="conquista-icon">🥇</div>
                                    <h3>Primeira Excelente</h3>
                                    <p>Conseguiu sua primeira nota excelente!</p>
                                    <div class="conquista-date">15/10/2024</div>
                                </div>
                                
                                <div class="conquista-card earned">
                                    <div class="conquista-icon">📚</div>
                                    <h3>Estudante Dedicado</h3>
                                    <p>Participou de todas as aulas por 30 dias</p>
                                    <div class="conquista-date">10/10/2024</div>
                                </div>
                                
                                <div class="conquista-card earned">
                                    <div class="conquista-icon">🎯</div>
                                    <h3>Meta Alcançada</h3>
                                    <p>Alcançou a meta de 80% de frequência</p>
                                    <div class="conquista-date">05/10/2024</div>
                                </div>
                                
                                <div class="conquista-card locked">
                                    <div class="conquista-icon">🌟</div>
                                    <h3>Estrela Dourada</h3>
                                    <p>Conquiste 10 notas excelentes</p>
                                    <div class="conquista-progress">3/10</div>
                                </div>
                                
                                <div class="conquista-card locked">
                                    <div class="conquista-icon">🔥</div>
                                    <h3>Sequência de Fogo</h3>
                                    <p>Mantenha boas notas por 5 simulados</p>
                                    <div class="conquista-progress">2/5</div>
                                </div>
                                
                                <div class="conquista-card locked">
                                    <div class="conquista-icon">💎</div>
                                    <h3>Diamante</h3>
                                    <p>Alcance 100% de frequência em um mês</p>
                                    <div class="conquista-progress">85%</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SEÇÃO CALENDÁRIO -->
                    <div id="alunoCalendarioSection" style="display: none;">
                        <div class="boletim-container">
                            <div class="bd-header">
                                <div class="bd-perfil">
                                    <div class="avatar-container">
                                        <img src="https://via.placeholder.com/80x80" alt="Foto do aluno" class="bd-avatar-oval" width="80" height="80">
                                        <div class="avatar-badge">📅</div>
                                    </div>
                                    <div class="bd-perfil-info">
                                        <strong class="bd-perfil-nome" id="alunoCalendarioNome">João da Silva</strong>
                                        <div class="bd-perfil-meta">Meu Calendário Escolar</div>
                                    </div>
                                </div>
                                <div class="header-badges">
                                    <div class="bd-projk">ProJK</div>
                                </div>
                            </div>

                            <div class="calendar-container">
                                <div class="calendar-events">
                                    <h3>📅 Próximos Eventos</h3>
                                    <div class="event-list">
                                        <div class="event-item upcoming">
                                            <div class="event-date">
                                                <span class="day">25</span>
                                                <span class="month">NOV</span>
                                            </div>
                                            <div class="event-info">
                                                <h4>Simulado de Matemática</h4>
                                                <p>📝 Avaliação bimestral</p>
                                                <span class="event-time">08:00 - 10:00</span>
                                            </div>
                                        </div>
                                        
                                        <div class="event-item upcoming">
                                            <div class="event-date">
                                                <span class="day">28</span>
                                                <span class="month">NOV</span>
                                            </div>
                                            <div class="event-info">
                                                <h4>Simulado de Português</h4>
                                                <p>📝 Avaliação bimestral</p>
                                                <span class="event-time">08:00 - 10:00</span>
                                            </div>
                                        </div>
                                        
                                        <div class="event-item completed">
                                            <div class="event-date">
                                                <span class="day">20</span>
                                                <span class="month">NOV</span>
                                            </div>
                                            <div class="event-info">
                                                <h4>Simulado de Ciências</h4>
                                                <p>✅ Concluído</p>
                                                <span class="event-result">Resultado: Bom</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="calendar-stats">
                                    <h3>📊 Estatísticas do Mês</h3>
                                    <div class="stats-grid">
                                        <div class="stat-item">
                                            <div class="stat-icon">📚</div>
                                            <div class="stat-value">15</div>
                                            <div class="stat-label">Aulas</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-icon">✅</div>
                                            <div class="stat-value">14</div>
                                            <div class="stat-label">Presentes</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-icon">📝</div>
                                            <div class="stat-value">3</div>
                                            <div class="stat-label">Simulados</div>
                                        </div>
                                        <div class="stat-item">
                                            <div class="stat-icon">🎯</div>
                                            <div class="stat-value">93%</div>
                                            <div class="stat-label">Frequência</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="alunoPerfilSection" style="display: none;">
                        <div class="photo-section">
                            <div class="user-photo" onclick="changePhoto()">👤</div>
                            <h2 class="user-name" id="alunoPerfilNome">João da Silva</h2>
                            <div class="discipline-badge">Aluno - 3ª Série A</div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
                            <button class="btn btn-edit" onclick="editAlunoProfile()">
                                <span style="font-size: 18px; margin-right: 8px;">✏️</span>
                                Editar Perfil
                            </button>
                            <button class="btn btn-save" onclick="saveAlunoProfile()">
                                <span style="font-size: 18px; margin-right: 8px;">💾</span>
                                Salvar
                            </button>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <div class="corner-decoration bottom-left"></div>
        <div class="corner-decoration bottom-right"></div>
    </div>

    <script src="script.js"></script>
    <script>
        // Função de navegação para páginas separadas
        function navigateToPage(page) {
            window.location.href = page;
        }

        // Função para mostrar seções do aluno
        function showAlunoSection(section) {
            // Esconder todas as seções
            document.querySelectorAll('[id$="Section"]').forEach(sec => {
                sec.style.display = 'none';
            });
            
            // Remover classe active de todos os itens do menu
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Mostrar seção selecionada
            const targetSection = document.getElementById(`aluno${section.charAt(0).toUpperCase() + section.slice(1)}Section`);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
            
            // Adicionar classe active ao item do menu
            event.target.closest('.menu-item').classList.add('active');
        }

        // Modificar função logout para redirecionar
        function logout() {
            localStorage.removeItem('currentUser');
            showAlert('Logout realizado com sucesso!', 'success');
            setTimeout(() => navigateToPage('login.html'), 1500);
        }

        // Variável para controlar o modo de acessibilidade atual
        let currentAccessibilityMode = 'nenhum';

        // Função para alternar acessibilidade
        function toggleAccessibility(mode) {
            const body = document.body;
            const daltonismoLegend = document.getElementById('daltonismoLegend');
            const pbLegend = document.getElementById('pbLegend');
            
            // Remover modos anteriores
            body.classList.remove('daltonismo-mode', 'preto-e-branco-mode');
            daltonismoLegend.classList.remove('show');
            pbLegend.classList.remove('show');
            
            currentAccessibilityMode = mode;
            
            if (mode === 'daltonismo') {
                body.classList.add('daltonismo-mode');
                daltonismoLegend.classList.add('show');
                showAlert('Modo Daltônico ativado! Legenda exibida.', 'success');
            } else if (mode === 'preto-e-branco') {
                body.classList.add('preto-e-branco-mode');
                pbLegend.classList.add('show');
                showAlert('Modo Preto e Branco ativado! Legenda exibida.', 'success');
            } else {
                showAlert('Modo de visualização padrão restaurado.', 'success');
            }
            
            // Fechar menu de acessibilidade após seleção
            document.getElementById('accessibilityOptions').classList.remove('show');
        }
        
        // Função para alternar legenda de daltonismo
        function toggleLegend() {
            const legend = document.getElementById('daltonismoLegend');
            legend.classList.toggle('show');
        }
        
        // Função para alternar legenda P&B
        function togglePbLegend() {
            const legend = document.getElementById('pbLegend');
            legend.classList.toggle('show');
        }
        
        // Fechar legendas ao clicar no overlay (pseudo-elemento)
        document.addEventListener('click', function(e) {
            const daltonismoLegend = document.getElementById('daltonismoLegend');
            const pbLegend = document.getElementById('pbLegend');
            const legendToggle = document.querySelector('.legend-toggle');
            const pbLegendToggle = document.querySelector('.pb-legend-toggle');
            
            // Se a legenda está aberta e o clique foi fora dela
            if (daltonismoLegend && daltonismoLegend.classList.contains('show')) {
                if (!daltonismoLegend.contains(e.target) && e.target !== legendToggle && !legendToggle.contains(e.target)) {
                    daltonismoLegend.classList.remove('show');
                }
            }
            
            if (pbLegend && pbLegend.classList.contains('show')) {
                if (!pbLegend.contains(e.target) && e.target !== pbLegendToggle && !pbLegendToggle.contains(e.target)) {
                    pbLegend.classList.remove('show');
                }
            }
        });
        
        // Fechar legendas com ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const daltonismoLegend = document.getElementById('daltonismoLegend');
                const pbLegend = document.getElementById('pbLegend');
                if (daltonismoLegend) daltonismoLegend.classList.remove('show');
                if (pbLegend) pbLegend.classList.remove('show');
            }
        });
        
        // Toggle do menu de acessibilidade
        document.addEventListener('DOMContentLoaded', function() {
            const accessibilityToggle = document.querySelector('.accessibility-toggle');
            const accessibilityOptions = document.getElementById('accessibilityOptions');
            
            if (accessibilityToggle) {
                accessibilityToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    accessibilityOptions.classList.toggle('show');
                });
            }
            
            // Fechar menu ao clicar fora
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.accessibility-menu')) {
                    accessibilityOptions.classList.remove('show');
                }
            });
            
            // Carregar dados do usuário do localStorage
            const userData = localStorage.getItem('currentUser');
            if (!userData) {
                navigateToPage('login.html');
                return;
            }

            const currentUser = JSON.parse(userData);
            if (currentUser.type !== 'aluno') {
                navigateToPage('login.html');
                return;
            }

            // Atualizar informações do perfil
            const nomeElements = document.querySelectorAll('#alunoPerfilNome');
            const infoElement = document.getElementById('alunoPerfilInfo');
            
            nomeElements.forEach(el => {
                if (el) el.textContent = currentUser.name;
            });
            
            if (infoElement) {
                infoElement.textContent = `Matrícula: ${currentUser.matricula} • Turma: ${currentUser.serie}ª${currentUser.turma}`;
            }
            
            // Funcionalidade dos botões da toolbar
            const toolbar = document.querySelector('.bd-toolbar');
            if (toolbar) {
                toolbar.addEventListener('click', function(e) {
                    const btn = e.target.closest('.bd-btn');
                    if (!btn) return;
                    
                    const action = btn.dataset.action;
                    
                    switch(action) {
                        case 'font-dec':
                            adjustFontSize(-1);
                            break;
                        case 'font-inc':
                            adjustFontSize(1);
                            break;
                        case 'contrast':
                            toggleHighContrast();
                            break;
                        case 'dyslexia':
                            toggleDyslexiaFont();
                            break;
                        case 'reduce-motion':
                            toggleReducedMotion();
                            break;
                        case 'print':
                            exportBoletimPDF();
                            break;
                    }
                });
            }
        });
        
        // Funções auxiliares da toolbar
        let fontSize = 100;
        function adjustFontSize(delta) {
            fontSize = Math.max(80, Math.min(120, fontSize + delta * 10));
            document.documentElement.style.fontSize = fontSize + '%';
            showAlert(`Tamanho da fonte: ${fontSize}%`, 'success');
        }
        
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            const isActive = document.body.classList.contains('high-contrast');
            showAlert(isActive ? 'Alto contraste ativado' : 'Alto contraste desativado', 'success');
        }
        
        function toggleDyslexiaFont() {
            document.body.classList.toggle('dyslexia-font');
            const isActive = document.body.classList.contains('dyslexia-font');
            showAlert(isActive ? 'Fonte para dislexia ativada' : 'Fonte padrão restaurada', 'success');
        }
        
        function toggleReducedMotion() {
            document.body.classList.toggle('reduced-motion');
            const isActive = document.body.classList.contains('reduced-motion');
            showAlert(isActive ? 'Animações reduzidas' : 'Animações restauradas', 'success');
        }
        
        // Função para navegar entre simulados
        function navegarSimulado(numeroSimulado) {
            // Remover classe active de todos os botões
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Adicionar classe active ao botão clicado
            document.querySelector(`[data-simulado="${numeroSimulado}"]`).classList.add('active');
            
            // Mostrar apenas a coluna do simulado selecionado
            const headers = document.querySelectorAll('.tab-header');
            const cells = document.querySelectorAll('.grade-cell');
            
            headers.forEach((header, index) => {
                if (index === 0) return; // Pular o header "Disciplina"
                
                if (index === numeroSimulado) {
                    header.classList.add('active');
                } else {
                    header.classList.remove('active');
                }
            });
            
            // Destacar coluna correspondente
            cells.forEach(cell => {
                // Remover todas as classes de destaque
                cell.classList.remove('destaque-col-1', 'destaque-col-2', 'destaque-col-3', 'destaque-col-4');
                
                // Adicionar classe de destaque para a coluna selecionada
                if (cell.parentElement.children[numeroSimulado] === cell) {
                    cell.classList.add(`destaque-col-${numeroSimulado}`);
                }
            });
            
            showAlert(`Visualizando Simulado ${numeroSimulado}`, 'success');
        }

        function exportBoletimPDF() {
            const userData = localStorage.getItem('currentUser');
            if (!userData) {
                showAlert('Erro: Usuário não encontrado!', 'error');
                return;
            }

            const currentUser = JSON.parse(userData);
            showAlert('Gerando PDF do boletim...', 'success');
            
            // Dados do boletim
            const disciplinas = [
                { nome: 'Português', sim1: 'Bom', sim2: 'Insatisfatório', sim3: 'Regular', sim4: 'Excelente' },
                { nome: 'Matemática', sim1: 'Bom', sim2: 'Regular', sim3: 'Excelente', sim4: 'Bom' },
                { nome: 'Ciências', sim1: 'Excelente', sim2: 'Bom', sim3: 'Insatisfatório', sim4: 'Regular' }
            ];
            
            // Criar conteúdo HTML para o PDF
            let htmlContent = `
                <html>
                <head>
                    <style>
                        body { 
                            font-family: 'Segoe UI', Arial, sans-serif; 
                            padding: 40px; 
                            background: #f8f9fa; 
                        }
                        .container { 
                            background: white; 
                            padding: 40px; 
                            border-radius: 15px; 
                            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); 
                        }
                        h1 { 
                            color: #D4AF37; 
                            text-align: center; 
                            margin-bottom: 10px; 
                            font-size: 32px;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
                        }
                        h2 { 
                            color: #C19A2B; 
                            text-align: center;
                            margin-bottom: 30px; 
                            font-size: 18px; 
                        }
                        .info-section { 
                            background: linear-gradient(135deg, #f5f3e8, #ede8d5); 
                            padding: 20px; 
                            border-radius: 12px; 
                            margin-bottom: 25px;
                            border-left: 5px solid #D4AF37;
                        }
                        .info-section p { 
                            margin: 8px 0; 
                            color: #555; 
                        }
                        table { 
                            width: 100%; 
                            border-collapse: separate; 
                            border-spacing: 0; 
                            margin-top: 25px;
                            border-radius: 12px;
                            overflow: hidden;
                            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
                        }
                        th { 
                            background: linear-gradient(135deg, #D4AF37, #C19A2B); 
                            color: white; 
                            padding: 15px 12px; 
                            text-align: center;
                            font-weight: 600;
                            font-size: 13px;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                        }
                        th:first-child {
                            text-align: left;
                        }
                        td { 
                            border-bottom: 1px solid #e0e0e0; 
                            padding: 14px 12px;
                            background: white;
                            color: #333;
                            text-align: center;
                        }
                        td:first-child {
                            text-align: left;
                            font-weight: 600;
                            color: #C19A2B;
                        }
                        tr:nth-child(even) td { 
                            background: #fafafa; 
                        }
                        tr:last-child td { 
                            border-bottom: none; 
                        }
                        
                        .nota-cell {
                            display: inline-block;
                            padding: 8px 20px;
                            border-radius: 25px;
                            font-weight: bold;
                            font-size: 12px;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                            border: 2px solid transparent;
                        }
                        
                        .nota-excelente { 
                            background: linear-gradient(135deg, #4CAF50, #45a049); 
                            color: white;
                            border-color: #388E3C;
                        }
                        .nota-bom { 
                            background: linear-gradient(135deg, #2196F3, #1976D2); 
                            color: white;
                            border-color: #1565C0;
                        }
                        .nota-regular { 
                            background: linear-gradient(135deg, #FF9800, #F57C00); 
                            color: white;
                            border-color: #E65100;
                        }
                        .nota-insatisfatorio { 
                            background: linear-gradient(135deg, #F44336, #D32F2F); 
                            color: white;
                            border-color: #B71C1C;
                        }
                        
                        .legenda {
                            display: flex;
                            justify-content: center;
                            gap: 20px;
                            margin: 30px 0 20px 0;
                            padding: 15px;
                            background: #f5f3e8;
                            border-radius: 10px;
                        }
                        .legenda-item {
                            display: flex;
                            align-items: center;
                            gap: 8px;
                            font-size: 12px;
                        }
                        .legenda-color {
                            width: 25px;
                            height: 25px;
                            border-radius: 50%;
                            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                        }
                        
                        .footer { 
                            margin-top: 40px; 
                            text-align: center; 
                            font-size: 12px; 
                            color: #888;
                            padding-top: 30px;
                            border-top: 2px solid #D4AF37;
                        }
                        .footer p { 
                            margin: 5px 0; 
                        }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <h1>📋 Boletim Escolar</h1>
                        <h2>Sistema Escolar JK</h2>
                        
                        <div class="info-section">
                            <p><strong>Aluno:</strong> ${currentUser.name}</p>
                            <p><strong>Matrícula:</strong> ${currentUser.matricula}</p>
                            <p><strong>Turma:</strong> ${currentUser.serie}ª Série ${currentUser.turma}</p>
                            <p><strong>Data de Emissão:</strong> ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}</p>
                        </div>
                        
                        <div class="legenda">
                            <div class="legenda-item">
                                <div class="legenda-color" style="background: linear-gradient(135deg, #4CAF50, #45a049);"></div>
                                <span><strong>Excelente</strong></span>
                            </div>
                            <div class="legenda-item">
                                <div class="legenda-color" style="background: linear-gradient(135deg, #2196F3, #1976D2);"></div>
                                <span><strong>Bom</strong></span>
                            </div>
                            <div class="legenda-item">
                                <div class="legenda-color" style="background: linear-gradient(135deg, #FF9800, #F57C00);"></div>
                                <span><strong>Regular</strong></span>
                            </div>
                            <div class="legenda-item">
                                <div class="legenda-color" style="background: linear-gradient(135deg, #F44336, #D32F2F);"></div>
                                <span><strong>Insatisfatório</strong></span>
                            </div>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Disciplina</th>
                                    <th>Simulado 1</th>
                                    <th>Simulado 2</th>
                                    <th>Simulado 3</th>
                                    <th>Simulado 4</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${disciplinas.map(disc => {
                                    const getClass = (nota) => {
                                        if (nota === 'Excelente') return 'nota-excelente';
                                        if (nota === 'Bom') return 'nota-bom';
                                        if (nota === 'Regular') return 'nota-regular';
                                        return 'nota-insatisfatorio';
                                    };
                                    
                                    return `
                                    <tr>
                                        <td>${disc.nome}</td>
                                        <td><span class="nota-cell ${getClass(disc.sim1)}">${disc.sim1}</span></td>
                                        <td><span class="nota-cell ${getClass(disc.sim2)}">${disc.sim2}</span></td>
                                        <td><span class="nota-cell ${getClass(disc.sim3)}">${disc.sim3}</span></td>
                                        <td><span class="nota-cell ${getClass(disc.sim4)}">${disc.sim4}</span></td>
                                    </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                        
                        <div class="footer">
                            <p><strong>Sistema Escolar JK - Gestão Acadêmica</strong></p>
                            <p>Boletim gerado automaticamente</p>
                            <p>${new Date().toLocaleString('pt-BR')}</p>
                        </div>
                    </div>
                </body>
                </html>
            `;
            
            // Criar e fazer download do PDF
            const printWindow = window.open('', '', 'height=800,width=1000');
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            
            setTimeout(() => {
                printWindow.print();
                showAlert('PDF gerado! Use a opção "Salvar como PDF" na janela de impressão.', 'success');
            }, 500);
        }
    </script>
</body>
</html>
